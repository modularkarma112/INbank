{
  "version": 3,
  "sources": ["src/app/pages/usuarios-alta/usuarios-alta.component.ts", "src/app/pages/usuarios-alta/usuarios-alta.component.html"],
  "sourcesContent": ["import { Component, signal } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ReactiveFormsModule, FormBuilder, Validators } from '@angular/forms';\r\nimport { Router, RouterLink } from '@angular/router';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\n@Component({\r\n  selector: 'app-usuarios-alta',\r\n  standalone: true,\r\n  imports: [CommonModule, ReactiveFormsModule, RouterLink],\r\n  templateUrl: './usuarios-alta.component.html',\r\n  styleUrl: './usuarios-alta.component.css'\r\n})\r\nexport class UsuariosAltaComponent {\r\n  form = this.fb.group({\r\n    usuario: ['', [Validators.required, Validators.minLength(3)]],\r\n    nombre: ['', [Validators.required, Validators.minLength(2)]],\r\n    apellido_paterno: [''],\r\n    apellido_materno: [''],\r\n    correo: ['', [Validators.required, Validators.email]],\r\n    contrasena: ['', [Validators.required, Validators.minLength(6)]],\r\n    curp: [''],\r\n    direccion: [''],\r\n    telefono: ['', [Validators.pattern(/^\\d{10}$/)]],\r\n    rol: ['GERENTE', Validators.required]\r\n  });\r\n\r\n  isSubmitting = signal(false);\r\n  roles = ['GERENTE', 'CAJERO', 'EJECUTIVO', 'ADMIN'];\r\n\r\n  constructor(private fb: FormBuilder, private http: HttpClient, private router: Router) {}\r\n\r\n  get api() { return (window as any).API_BASE || ''; }\r\n\r\n  submit() {\r\n    if (this.form.invalid) { this.form.markAllAsTouched(); return; }\r\n    this.isSubmitting.set(true);\r\n    this.http.post(`${this.api}/api/usuarios`, this.form.value).subscribe({\r\n      next: () => {\r\n        alert('Usuario creado correctamente');\r\n        this.isSubmitting.set(false);\r\n        this.router.navigate(['/dashboard']);\r\n      },\r\n      error: (err) => {\r\n        this.isSubmitting.set(false);\r\n        if (err.status === 409 && err.error?.fields) {\r\n          const f = err.error.fields;\r\n          const msg = [ f.usuario ? 'usuario' : null, f.correo ? 'correo' : null ].filter(Boolean).join(' y ');\r\n          alert(`Ya existe un ${msg} registrado`);\r\n        } else {\r\n          alert('Error al crear usuario');\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n", "<div class=\"container mt-4\">\r\n  <div class=\"d-flex justify-content-between align-items-center\">\r\n    <h2>Alta de Usuarios</h2>\r\n    <a class=\"btn btn-secondary\" routerLink=\"/dashboard\">Volver</a>\r\n  </div>\r\n  <form [formGroup]=\"form\" (ngSubmit)=\"submit()\" class=\"mt-3\">\r\n    <div class=\"row g-3\">\r\n      <div class=\"col-md-4\">\r\n        <label class=\"form-label\">Usuario</label>\r\n        <input class=\"form-control\" formControlName=\"usuario\" />\r\n      </div>\r\n      <div class=\"col-md-4\">\r\n        <label class=\"form-label\">Nombre</label>\r\n        <input class=\"form-control\" formControlName=\"nombre\" />\r\n      </div>\r\n      <div class=\"col-md-4\">\r\n        <label class=\"form-label\">Apellido Paterno</label>\r\n        <input class=\"form-control\" formControlName=\"apellido_paterno\" />\r\n      </div>\r\n      <div class=\"col-md-4\">\r\n        <label class=\"form-label\">Apellido Materno</label>\r\n        <input class=\"form-control\" formControlName=\"apellido_materno\" />\r\n      </div>\r\n      <div class=\"col-md-4\">\r\n        <label class=\"form-label\">Correo</label>\r\n        <input class=\"form-control\" formControlName=\"correo\" type=\"email\" />\r\n      </div>\r\n      <div class=\"col-md-4\">\r\n        <label class=\"form-label\">Contraseña</label>\r\n        <input class=\"form-control\" formControlName=\"contrasena\" type=\"password\" />\r\n      </div>\r\n      <div class=\"col-md-4\">\r\n        <label class=\"form-label\">CURP</label>\r\n        <input class=\"form-control\" formControlName=\"curp\" />\r\n      </div>\r\n      <div class=\"col-12\">\r\n        <label class=\"form-label\">Dirección</label>\r\n        <textarea class=\"form-control\" rows=\"2\" formControlName=\"direccion\"></textarea>\r\n      </div>\r\n      <div class=\"col-md-4\">\r\n        <label class=\"form-label\">Teléfono (10 dígitos)</label>\r\n        <input class=\"form-control\" formControlName=\"telefono\" />\r\n      </div>\r\n      <div class=\"col-md-4\">\r\n        <label class=\"form-label\">Rol</label>\r\n        <select class=\"form-select\" formControlName=\"rol\">\r\n          <option *ngFor=\"let r of roles\" [value]=\"r\">{{r}}</option>\r\n        </select>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"mt-3 d-flex gap-2\">\r\n      <button class=\"btn btn-primary\" type=\"submit\" [disabled]=\"isSubmitting()\">Crear</button>\r\n      <a class=\"btn btn-secondary\" routerLink=\"/dashboard\">Cancelar</a>\r\n    </div>\r\n  </form>\r\n</div>\r\n"],
  "mappings": "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",
  "names": []
}
