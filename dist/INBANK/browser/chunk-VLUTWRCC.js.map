{
  "version": 3,
  "sources": ["src/app/pages/usuarios-roles/usuarios-roles.component.ts"],
  "sourcesContent": ["import { Component, signal } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Router, RouterLink } from '@angular/router';\r\n\r\n@Component({\r\n\tselector:'app-usuarios-roles',\r\n\tstandalone:true,\r\n\timports:[CommonModule, RouterLink],\r\n\t\ttemplate: `\r\n\t<div class=\"container mt-4\">\r\n\t\t\t<div class=\"d-flex justify-content-between align-items-center mb-3\">\r\n\t\t\t<h2>Usuarios & Roles</h2>\r\n\t\t\t\t<div class=\"d-flex gap-2\">\r\n\t\t\t\t\t<a class=\"btn btn-secondary\" routerLink=\"/dashboard\">Volver</a>\r\n\t\t\t\t\t<a class=\"btn btn-primary\" routerLink=\"/usuarios/alta\">Agregar Usuario</a>\r\n\t\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"table-responsive\">\r\n\t\t\t<table class=\"table table-sm table-striped\">\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>ID</th>\r\n\t\t\t\t\t\t<th>Usuario</th>\r\n\t\t\t\t\t\t<th>Nombre</th>\r\n\t\t\t\t\t\t<th>Correo</th>\r\n\t\t\t\t\t\t<th>Rol</th>\r\n\t\t\t\t\t\t<th>Teléfono</th>\r\n\t\t\t\t\t\t<th>Acciones</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t<tr *ngFor=\"let u of usuarios()\">\r\n\t\t\t\t\t\t<td>{{u.id}}</td>\r\n\t\t\t\t\t\t<td>{{u.usuario}}</td>\r\n\t\t\t\t\t\t<td>{{u.nombre}} {{u.apellido_paterno || ''}} {{u.apellido_materno || ''}}</td>\r\n\t\t\t\t\t\t<td>{{u.correo}}</td>\r\n\t\t\t\t\t\t<td>{{u.rol}}</td>\r\n\t\t\t\t\t\t<td>{{u.telefono || '-'}}</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<button class=\"btn btn-sm btn-outline-primary me-2\" (click)=\"cambiarPassword(u)\">Cambiar contraseña</button>\r\n\t\t\t\t\t\t\t<button class=\"btn btn-sm btn-outline-danger\" (click)=\"eliminar(u)\">Eliminar</button>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t</div>\r\n\t</div>\r\n\t`\r\n})\r\nexport class UsuariosRolesComponent{\r\n\tapi = (window as any).API_BASE || '';\r\n\tusuarios = signal<any[]>([]);\r\n\tconstructor(private http: HttpClient, private router: Router){ this.cargar(); }\r\n\tcargar(){ this.http.get(`${this.api}/api/usuarios`).subscribe((r:any)=> this.usuarios.set(r||[])); }\r\n\t\r\n\t\tcambiarPassword(u:any){\r\n\t\t\tconst p1 = prompt(`Nueva contraseña para ${u.usuario} (mín. 6 caracteres):`);\r\n\t\t\tif (!p1) return;\r\n\t\t\tif (p1.length < 6) { alert('La contraseña debe tener al menos 6 caracteres'); return; }\r\n\t\t\tconst p2 = prompt('Confirma la contraseña:');\r\n\t\t\tif (p1 !== p2) { alert('Las contraseñas no coinciden'); return; }\r\n\t\t\tthis.http.put(`${this.api}/api/usuarios/${u.id}/password`, { contrasena: p1 }).subscribe({\r\n\t\t\t\tnext: ()=> { alert('Contraseña actualizada'); },\r\n\t\t\t\terror: (e)=> alert(e?.error?.message || 'Error actualizando contraseña')\r\n\t\t\t});\r\n\t\t}\r\n\teliminar(u:any){\r\n\t\tif(!confirm(`¿Eliminar al usuario ${u.usuario}?`)) return;\r\n\t\tthis.http.delete(`${this.api}/api/usuarios/${u.id}`).subscribe({\r\n\t\t\tnext:()=>{ this.cargar(); },\r\n\t\t\terror:(e)=> alert(e?.error?.message || 'Error eliminando usuario')\r\n\t\t});\r\n\t}\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
