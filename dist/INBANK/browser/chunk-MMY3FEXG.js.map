{
  "version": 3,
  "sources": ["src/app/pages/cuentas/cuentas.component.ts"],
  "sourcesContent": ["import { Component } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { RouterLink } from '@angular/router';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\n@Component({\r\n\tselector: 'app-cuentas',\r\n\tstandalone: true,\r\n\timports: [CommonModule, FormsModule, RouterLink],\r\n\ttemplate: `\r\n\t<div class=\"container\" style=\"max-width:1100px; margin:20px auto;\">\r\n\t\t<div style=\"display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;\">\r\n\t\t\t<h2 style=\"margin:0;\">Cuentas</h2>\r\n\t\t\t<a class=\"btn btn-secondary\" routerLink=\"/dashboard\">Volver</a>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"card\" style=\"padding:12px; margin-bottom:12px;\">\r\n\t\t\t<div style=\"display:grid; grid-template-columns: repeat(3, 1fr); gap:10px;\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label>Número</label>\r\n\t\t\t\t\t<input class=\"form-control\" [(ngModel)]=\"f.numero\" name=\"numero\" placeholder=\"16 dígitos\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label>Nombre cliente</label>\r\n\t\t\t\t\t<input class=\"form-control\" [(ngModel)]=\"f.nombre\" name=\"nombre\" placeholder=\"Nombre o apellido\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"display:flex; align-items:flex-end; gap:8px;\">\r\n\t\t\t\t\t<button class=\"btn btn-primary\" (click)=\"buscar()\">Buscar</button>\r\n\t\t\t\t\t<button class=\"btn\" (click)=\"limpiar()\">Limpiar</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"table-responsive\" *ngIf=\"rows?.length; else empty\">\r\n\t\t\t<table class=\"table table-striped\" style=\"width:100%;\">\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>ID</th>\r\n\t\t\t\t\t\t<th>Número</th>\r\n\t\t\t\t\t\t<th>Cliente</th>\r\n\t\t\t\t\t\t<th>Saldo</th>\r\n\t\t\t\t\t\t<th>Estatus</th>\r\n\t\t\t\t\t\t<th>Acciones</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t<tr *ngFor=\"let c of rows\">\r\n\t\t\t\t\t\t<td>{{c.id}}</td>\r\n\t\t\t\t\t\t<td>{{c.numero_cuenta}}</td>\r\n\t\t\t\t\t\t<td>{{c.nombres}} {{c.apellido_paterno}} {{c.apellido_materno}}</td>\r\n\t\t\t\t\t\t<td>{{ c.saldo | number:'1.2-2' }}</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<span [ngStyle]=\"badge(c.estatus)\">{{c.estatus}}</span>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<select [ngModel]=\"c.estatus\" (ngModelChange)=\"onChangeEstatus(c, $event)\">\r\n\t\t\t\t\t\t\t\t<option *ngFor=\"let s of estatusOpts\" [value]=\"s\">{{s}}</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t</div>\r\n\t\t<ng-template #empty>\r\n\t\t\t<p style=\"opacity:0.7;\">No hay resultados.</p>\r\n\t\t</ng-template>\r\n\t</div>\r\n\t`\r\n})\r\nexport class CuentasComponent {\r\n\tf = { numero: '', nombre: '' };\r\n\trows: any[] = [];\r\n\testatusOpts = ['ACTIVA', 'SUSPENDIDA', 'BLOQUEADA', 'CANCELADA'];\r\n\r\n\tconstructor(private http: HttpClient) {\r\n\t\tthis.buscar();\r\n\t}\r\n\r\n\tlimpiar(){ this.f = { numero: '', nombre: '' }; this.buscar(); }\r\n\r\n\tbuscar(){\r\n\t\tconst params: any = {};\r\n\t\tif (this.f.numero) params.numero = this.f.numero;\r\n\t\tif (this.f.nombre) params.nombre = this.f.nombre;\r\n\t\tthis.http.get<any[]>('/api/cuentas/buscar', { params }).subscribe({\r\n\t\t\tnext: r => this.rows = r || [],\r\n\t\t\terror: err => { console.error(err); alert('Error al buscar cuentas'); }\r\n\t\t});\r\n\t}\r\n\r\n\tonChangeEstatus(c: any, nuevo: string){\r\n\t\tif (nuevo === c.estatus) return;\r\n\t\tif (nuevo === 'CANCELADA'){\r\n\t\t\tconst motivo = prompt('Motivo de cancelación:', 'Solicitud del cliente');\r\n\t\t\tthis.http.post(`/api/cuentas/${c.id}/cancelar`, { motivo_cancelacion: motivo || '' }).subscribe({\r\n\t\t\t\tnext: _ => { c.estatus = 'CANCELADA'; },\r\n\t\t\t\terror: err => { console.error(err); alert('No se pudo cancelar la cuenta'); }\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.http.put(`/api/cuentas/${c.id}/estatus`, { estatus: nuevo }).subscribe({\r\n\t\t\tnext: _ => { c.estatus = nuevo; },\r\n\t\t\terror: err => { console.error(err); alert('No se pudo cambiar el estatus'); }\r\n\t\t});\r\n\t}\r\n\r\n\tbadge(s: string){\r\n\t\tconst base = { padding: '3px 8px', borderRadius:'12px', fontSize:'12px', background:'#eee' } as any;\r\n\t\tif (s === 'ACTIVA') return { ...base, background: '#E6FAF0', color: '#067647' };\r\n\t\tif (s === 'SUSPENDIDA') return { ...base, background: '#FEF0C7', color: '#9A5812' };\r\n\t\tif (s === 'BLOQUEADA') return { ...base, background: '#FEE4E2', color: '#B42318' };\r\n\t\tif (s === 'CANCELADA') return { ...base, background: '#E5E7EB', color: '#111827' };\r\n\t\treturn base;\r\n\t}\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
